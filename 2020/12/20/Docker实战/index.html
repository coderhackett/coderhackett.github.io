<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Docker实战 | 加班猿</title><script src="https://cdn.bootcss.com/valine/1.4.4/Valine.min.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/mermaid/8.8.2/mermaid.min.js"></script><script>mermaid.initialize({
  startOnLoad: true
  , theme: 'dark'
});</script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.2.0"></head><body><header><nav><a href="/">Home</a><a href="/archives/">Archives</a></nav></header><main><article><div id="post-bg"><div id="post-title"><div id="post-info"><span>date:<time datetime="2020-12-19T16:00:00.000Z" id="date"> 2020-12-20</time></span><br><span>updated:<time datetime="2020-12-20T08:41:25.732Z" id="updated"> 2020-12-20</time></span></div><h1>Docker实战</h1><hr></div><div id="post-content"><p><img src="https://img-blog.csdnimg.cn/20201029203102512.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3ODI0MzU3,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<div align = 'right'>作者：hackett</div>

<div align = 'right'>微信公众号：加班猿</div>



<h2 id="一、准备工具"><a href="#一、准备工具" class="headerlink" title="一、准备工具"></a>一、准备工具</h2><h3 id="云服务器"><a href="#云服务器" class="headerlink" title="云服务器"></a>云服务器</h3><p>我用的是腾讯云的Centos7.5 64位不到一百块一年的云服务器，你也可以用虚拟机</p>
<p><img src="https://gitee.com/coderhackett/typoraimg/raw/master/image/20201220142405.png" alt="image-20201220142358164"></p>
<h2 id="二、登录服务器工具"><a href="#二、登录服务器工具" class="headerlink" title="二、登录服务器工具"></a>二、登录服务器工具</h2><h3 id="MobaXterm"><a href="#MobaXterm" class="headerlink" title="MobaXterm"></a>MobaXterm</h3><p>1、之所以用这个作为ssh客户端，主要原因就是基于MobaXterm强大且丰富的功能，并且还都是免费的</p>
<p><strong>MobaXterm主要功能：</strong></p>
<ul>
<li>  支持各种连接 SSH，X11，RDP，VNC，FTP，MOSH</li>
<li>  支持 Unix 命令(bash，ls，cat，sed，grep，awk，rsync，…)</li>
<li>  连接 SSH 终端后支持 SFTP 传输文件</li>
<li>  各种丰富的插件(git/dig/aria2…)</li>
<li>  可运行 Windows 或软件</li>
</ul>
<p>下载地址：<a target="_blank" rel="noopener" href="https://mobaxterm.mobatek.net/download-home-edition.html">https://mobaxterm.mobatek.net/download-home-edition.html</a></p>
<p><img src="https://gitee.com/coderhackett/typoraimg/raw/master/image/20201220142807.png" alt="image-20201220142807287"></p>
<p>2、登录服务器</p>
<p><img src="https://gitee.com/coderhackett/typoraimg/raw/master/image/20201220143222.png" alt="image-20201220143222378"></p>
<h2 id="三、Centos-Docker安装"><a href="#三、Centos-Docker安装" class="headerlink" title="三、Centos Docker安装"></a>三、Centos Docker安装</h2><p>1、使用官方安装脚本安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun<br></code></pre></td></tr></table></figure>

<p>2、使用国内 daocloud 一键安装命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -sSL https://get.daocloud.io/docker | sh<br></code></pre></td></tr></table></figure>

<p>3、检查是否安装成功（docker -v）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># docker -v</span><br>Docker version 20.10.0, build 7287ab3<br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>

<p>4、启动docker</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo systemctl start docker<br></code></pre></td></tr></table></figure>

<p>5、通过hello world映像验证是否正确安装Docker</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># sudo docker run hello-world</span><br>Unable to find image <span class="hljs-string">&#x27;hello-world:latest&#x27;</span> locally<br>latest: Pulling from library/hello-world<br>0e03bdcc26d7: Pull complete<br>Digest: sha256:1a523af650137b8accdaed439c17d684df61ee4d74feac151b5b337bd29e7eec<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> hello-world:latest<br><br>Hello from Docker!	//可以看到这里成功运行了<br>This message shows that your installation appears to be working correctly.<br><br>To generate this message, Docker took the following steps:<br> 1. The Docker client contacted the Docker daemon.<br> 2. The Docker daemon pulled the <span class="hljs-string">&quot;hello-world&quot;</span> image from the Docker Hub.<br>    (amd64)<br> 3. The Docker daemon created a new container from that image <span class="hljs-built_in">which</span> runs the<br>    executable that produces the output you are currently reading.<br> 4. The Docker daemon streamed that output to the Docker client, <span class="hljs-built_in">which</span> sent it<br>    to your terminal.<br><br>To try something more ambitious, you can run an Ubuntu container with:<br> $ docker run -it ubuntu bash<br><br>Share images, automate workflows, and more with a free Docker ID:<br> https://hub.docker.com/<br><br>For more examples and ideas, visit:<br> https://docs.docker.com/get-started/<br><br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>

<h2 id="四、Docker实战开始"><a href="#四、Docker实战开始" class="headerlink" title="四、Docker实战开始"></a>四、Docker实战开始</h2><h3 id="1、Docker-Hello-World"><a href="#1、Docker-Hello-World" class="headerlink" title="1、Docker Hello World"></a>1、Docker Hello World</h3><p>Docker 允许你在容器内运行应用程序， 使用 <strong>docker run</strong> 命令来在容器内运行一个应用程序</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># docker run ubuntu:15.10 /bin/echo &quot;Hello world&quot;</span><br>Unable to find image <span class="hljs-string">&#x27;ubuntu:15.10&#x27;</span> locally<br>15.10: Pulling from library/ubuntu<br>7dcf5a444392: Pull complete<br>759aa75f3cee: Pull complete<br>3fa871dc8a2b: Pull complete<br>224c42ae46e7: Pull complete<br>Digest: sha256:02521a2d079595241c6793b2044f02eecf294034f31d6e235ac4b2b54ffc41f3<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> ubuntu:15.10<br>Hello world<br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>

<p>各个参数解析：</p>
<ul>
<li>  <strong>docker:</strong> Docker 的二进制执行文件。</li>
<li>  <strong>run:</strong> 与前面的 docker 组合来运行一个容器。</li>
<li>  <strong>ubuntu:15.10</strong> 指定要运行的镜像，Docker 首先从本地主机上查找镜像是否存在，如果不存在，Docker 就会从镜像仓库 Docker Hub 下载公共镜像。</li>
<li>  <strong>/bin/echo “Hello world”:</strong> 在启动的容器里执行的命令</li>
</ul>
<p>以上命令完整的意思可以解释为：Docker 以 ubuntu15.10 镜像创建一个新容器，然后在容器里执行 bin/echo “Hello world”，然后输出结果。</p>
<h3 id="2、交互式容器"><a href="#2、交互式容器" class="headerlink" title="2、交互式容器"></a>2、交互式容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># docker run -i -t ubuntu:15.10 /bin/bash</span><br>root@752fdf5d7764:/<span class="hljs-comment"># cat /proc/version</span><br>Linux version 3.10.0-1127.19.1.el7.x86_64 (mockbuild@kbuilder.bsys.centos.org) (gcc version 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC) ) <span class="hljs-comment">#1 SMP Tue Aug 25 17:23:54 UTC 2020</span><br>root@752fdf5d7764:/<span class="hljs-comment"># exit</span><br><span class="hljs-built_in">exit</span><br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>

<p>各个参数解析：</p>
<ul>
<li>  <strong>-t:</strong> 在新容器内指定一个伪终端或终端。</li>
<li>  <strong>-i:</strong> 允许你对容器内的标准输入 (STDIN) 进行交互。</li>
</ul>
<p>第二行我们已经进入了一个Ubuntu15.10的容器</p>
<p>第五行可以通过exit或CTRL + D来退出容器</p>
<h3 id="3、后台运行容器"><a href="#3、后台运行容器" class="headerlink" title="3、后台运行容器"></a>3、后台运行容器</h3><p>1、后台运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES<br>[root@VM-0-11-centos ~]<span class="hljs-comment"># docker run -d ubuntu:15.10 /bin/sh -c &quot;while true; do echo hello world; sleep 1; done&quot;</span><br>292152f399f3c2fa1fbac80edaffe2721f6948eba8c0821c652508805b82f2b3<br>[root@VM-0-11-centos ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID   IMAGE          COMMAND                  CREATED              STATUS              PORTS     NAMES<br>292152f399f3   ubuntu:15.10   <span class="hljs-string">&quot;/bin/sh -c &#x27;while t…&quot;</span>   About a minute ago   Up About a minute             blissful_lumiere<br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>

<p>输出详情介绍：</p>
<p><strong>CONTAINER ID:</strong> 容器 ID。</p>
<p><strong>IMAGE:</strong> 使用的镜像。</p>
<p><strong>COMMAND:</strong> 启动容器时运行的命令。</p>
<p><strong>CREATED:</strong> 容器的创建时间。</p>
<p><strong>STATUS:</strong> 容器状态。</p>
<p>状态有7种：</p>
<ul>
<li>  created（已创建）</li>
<li>  restarting（重启中）</li>
<li>  running 或 Up（运行中）</li>
<li>  removing（迁移中）</li>
<li>  paused（暂停）</li>
<li>  exited（停止）</li>
<li>  dead（死亡）</li>
</ul>
<p><strong>PORTS:</strong> 容器的端口信息和使用的连接类型（tcp\udp）。</p>
<p><strong>NAMES:</strong> 自动分配的容器名称。</p>
<p>2、查看容器的标准输出以及停止容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># docker logs 292152f399f3</span><br>hello world<br>hello world<br>hello world<br>hello world<br>hello world<br>hello world<br>hello world<br>hello world<br>hello world<br>hello world<br>hello world<br>hello world<br>[root@VM-0-11-centos ~]<span class="hljs-comment"># docker stop 292152f399f3</span><br>292152f399f3<br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>

<h3 id="4、运行一个web应用"><a href="#4、运行一个web应用" class="headerlink" title="4、运行一个web应用"></a>4、运行一个web应用</h3><p>在docker容器中运行一个 Python Flask 应用来运行一个web应用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># docker pull training/webapp</span><br>Using default tag: latest<br>latest: Pulling from training/webapp<br>Image docker.io/training/webapp:latest uses outdated schema1 manifest format. Please upgrade to a schema2 image <span class="hljs-keyword">for</span> better future compatibility. More information at https://docs.docker.com/registry/spec/deprecated-schema-v1/<br>e190868d63f8: Pull complete<br>909cd34c6fd7: Pull complete<br>0b9bfabab7c1: Pull complete<br>a3ed95caeb02: Pull complete<br>10bbbc0fc0ff: Downloading [===================&gt;                               ]  7.883MB/20.71MB<br>10bbbc0fc0ff: Downloading [==========================&gt;                        ]  11.08MB/20.71MB<br>fca59b508e9f: Downloading [====================&gt;                              ]  20.85MB/50.25MB<br>10bbbc0fc0ff: Downloading [==============================================&gt;    ]  19.38MB/20.71MB<br>fca59b508e9f: Downloading [==========================&gt;                        ]  26.43MB/50.25MB<br>10bbbc0fc0ff: Pull complete<br>fca59b508e9f: Downloading [================================&gt;                  ]  33.03MB/50.25MB<br>fca59b508e9f: Downloading [==================================&gt;                ]  35.06MB/50.25MB<br>fca59b508e9f: Pull complete<br>e7ae2541b15b: Pull complete<br>9dd97ef58ce9: Pull complete<br>a4c1b0cb7af7: Pull complete<br>Digest: sha256:06e9c1983bd6d5db5fba376ccd63bfa529e8d02f23d5079b8f74a616308fb11d<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> training/webapp:latest<br>docker.io/training/webapp:latest<br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br>[root@VM-0-11-centos ~]<span class="hljs-comment"># docker run -d -p 8080:5000 training/webapp python app.py</span><br>06fc6dc03d8ecf32f34fd7a687b6b3dbba1510e7f94e0c835aa2b210bffdf5eb<br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br>[root@VM-0-11-centos ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID   IMAGE             COMMAND           CREATED         STATUS         PORTS                    NAMES<br>06fc6dc03d8e   training/webapp   <span class="hljs-string">&quot;python app.py&quot;</span>   3 seconds ago   Up 3 seconds   0.0.0.0:8080-&gt;5000/tcp   busy_brahmagupta<br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>

<p>docker run -d -P training/webapp python app.py 参数说明:</p>
<ul>
<li>  **-d:**让容器在后台运行。</li>
<li>  **-P:**将容器内部使用的网络端口随机映射到我们使用的主机上。</li>
</ul>
<p>Docker 开放了 5000 端口（默认 Python Flask 端口）用-p指定映射到主机端口8080上。</p>
<p>这时候我们需要查看云服务器是否开放8080端口，没有看到端口</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># firewall-cmd --list-ports	//查看端口列表</span><br>You<span class="hljs-string">&#x27;re performing an operation over default zone (&#x27;</span>public<span class="hljs-string">&#x27;),</span><br><span class="hljs-string">but your connections/interfaces are in zone &#x27;</span>docker<span class="hljs-string">&#x27; (see --get-active-zones)</span><br><span class="hljs-string">You most likely need to use --zone=docker option.</span><br><span class="hljs-string"></span><br><span class="hljs-string">[root@VM-0-11-centos ~]#</span><br></code></pre></td></tr></table></figure>

<p>开放8080端口</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># firewall-cmd --add-port=8080/tcp --permanent	//开放8081端口</span><br>You<span class="hljs-string">&#x27;re performing an operation over default zone (&#x27;</span>public<span class="hljs-string">&#x27;),</span><br><span class="hljs-string">but your connections/interfaces are in zone &#x27;</span>docker<span class="hljs-string">&#x27; (see --get-active-zones)</span><br><span class="hljs-string">You most likely need to use --zone=docker option.</span><br><span class="hljs-string">success</span><br><span class="hljs-string">[root@VM-0-11-centos ~]# firewall-cmd --reload	//重新加载防火墙</span><br><span class="hljs-string">success</span><br><span class="hljs-string">[root@VM-0-11-centos ~]# firewall-cmd --list-ports//查看端口列表</span><br><span class="hljs-string">You&#x27;</span>re performing an operation over default zone (<span class="hljs-string">&#x27;public&#x27;</span>),<br>but your connections/interfaces are <span class="hljs-keyword">in</span> zone <span class="hljs-string">&#x27;docker&#x27;</span> (see --get-active-zones)<br>You most likely need to use --zone=docker option.<br>8080/tcp	//开放的端口<br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>

<p>这时我们可以通过浏览器访问WEB应用</p>
<p><img src="https://gitee.com/coderhackett/typoraimg/raw/master/image/20201220160545.png" alt="image-20201220153523209"></p>
<h3 id="5、Docker镜像使用"><a href="#5、Docker镜像使用" class="headerlink" title="5、Docker镜像使用"></a>5、Docker镜像使用</h3><p>1、列出镜像列表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY        TAG       IMAGE ID       CREATED         SIZE<br>ubuntu            latest    f643c72bc252   3 weeks ago     72.9MB<br>httpd             latest    0a30f4c29d25   4 weeks ago     138MB<br>hello-world       latest    bf756fb1ae65   11 months ago   13.3kB<br>ubuntu            15.10     9b9cb95443b5   4 years ago     137MB<br>training/webapp   latest    6fae60ef3446   5 years ago     349MB<br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>

<p>各个选项说明:</p>
<ul>
<li>  <strong>REPOSITORY：</strong>表示镜像的仓库源</li>
<li>  <strong>TAG：</strong>镜像的标签</li>
<li>  <strong>IMAGE ID：</strong>镜像ID</li>
<li>  <strong>CREATED：</strong>镜像创建时间</li>
<li>  <strong>SIZE：</strong>镜像大小</li>
</ul>
<p>2、获取镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker pull + 镜像名字<br></code></pre></td></tr></table></figure>

<p>3、查找镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker search + 镜像名字<br></code></pre></td></tr></table></figure>

<p>4、删除镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">/***docker rmi + 镜像名字***/<br><br>[root@VM-0-11-centos ~]<span class="hljs-comment"># docker rmi hello-world</span><br>Error response from daemon: conflict: unable to remove repository reference <span class="hljs-string">&quot;hello-world&quot;</span> (must force) - container 75d905f3f65d is using its referenced image bf756fb1ae65<br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>

<p>删除镜像错误需要先用docker rm + 运行过的镜像ID进行删除后才能删除镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># docker rm 75d905f3f65d</span><br>9e3a0d6881fc<br>[root@VM-0-11-centos ~]<span class="hljs-comment"># docker rmi hello-world</span><br>Untagged: hello-world:latest<br>Untagged: hello-world@sha256:1a523af650137b8accdaed439c17d684df61ee4d74feac151b5b337bd29e7eec<br>Deleted: sha256:bf756fb1ae65adf866bd8c456593cd24beb6a0a061dedf42b26a993176745f6b<br>Deleted: sha256:9c27e219663c25e0f28493790cc0b88bc973ba3b1686355f221c38a36978ac63<br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>

<h3 id="6、Docker容器连接"><a href="#6、Docker容器连接" class="headerlink" title="6、Docker容器连接"></a>6、Docker容器连接</h3><p>1、容器命名</p>
<p>当我们创建一个容器的时候，docker 会自动对它进行命名。另外，我们也可以使用 <strong>–name</strong> 标识来命名容器</p>
<p>使用 <strong>docker ps</strong> 命令来查看容器名称</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># docker run -d -P --name hackett training/webapp python app.py</span><br>9ac60cb23bd0fb5cb9be39de648f17bc9702883cef1a42682105316c6b32d104<br>[root@VM-0-11-centos ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID   IMAGE             COMMAND           CREATED          STATUS          PORTS                     NAMES<br>9ac60cb23bd0   training/webapp   <span class="hljs-string">&quot;python app.py&quot;</span>   5 seconds ago    Up 4 seconds    0.0.0.0:49154-&gt;5000/tcp   hackett<br>ef0567701e23   training/webapp   <span class="hljs-string">&quot;python app.py&quot;</span>   21 minutes ago   Up 21 minutes   0.0.0.0:8080-&gt;5000/tcp    vigilant_cerf<br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>

<p>2、连接容器</p>
<p>新建网络test-net网络</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># docker network create -d bridge test-ne</span><br>830af66ce29f8ab71f7d4e298a46d678a07ee8ba2abe50513d5d9000093e4990<br>[root@VM-0-11-centos ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>

<p>新建两个容器并连接到test-net网络</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@VM-0-11-centos ~]<span class="hljs-comment"># docker run -itd --name test1 --network test-net ubuntu /bin/bash</span><br>4cb1423808b71139ae43afad21dd0333c7ac6c6524d77e6abec7bf758c2ab2b0<br>[root@VM-0-11-centos ~]<span class="hljs-comment"># docker run -itd --name test2 --network test-net ubuntu /bin/bash</span><br>b11dbe9adb83985dac98f7d60aa9e8d4c0c86babbb2d22d7d52ee748fa85a2ed<br>[root@VM-0-11-centos ~]<span class="hljs-comment"># docker ps</span><br></code></pre></td></tr></table></figure>

<p>进入test1并测试ping test2（需要先安装ping命令）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">apt-get update<br>apt install iputils-ping<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plain">[root@VM-0-11-centos ~]# docker exec -it test1 &#x2F;bin&#x2F;bash<br>root@4cb1423808b7:&#x2F;#<br>root@4cb1423808b7:&#x2F;# ping test2<br>PING test2 (172.19.0.3) 56(84) bytes of data.<br>64 bytes from test2.test-net (172.19.0.3): icmp_seq&#x3D;1 ttl&#x3D;64 time&#x3D;0.089 ms<br>64 bytes from test2.test-net (172.19.0.3): icmp_seq&#x3D;2 ttl&#x3D;64 time&#x3D;0.071 ms<br></code></pre></td></tr></table></figure>

<p>参考链接：<a target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-tutorial.html">https://www.runoob.com/docker/docker-tutorial.html</a></p>
<p>如果你觉得文章还不错，记得”<strong>点赞关注</strong>“</p>
<p>关注我的微信公众号【 <strong>加班猿</strong> 】可以获取更多内容</p>
<p><img src="https://img-blog.csdnimg.cn/20201029203206698.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3ODI0MzU3,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<div id="paginator"></div></div><div id="post-footer"><hr><a href="/2021/01/04/redis%E5%AE%89%E8%A3%85/">← Prev Redis安装</a><span style="color: #fe2"> | </span><a href="/2020/11/15/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97/">斐波那契数列 Next →</a><hr></div><div id="bottom-btn"><a id="to-index" href="#post-index" title="index">≡</a><a id="to-top" href="#post-title" title="to top">∧</a></div><details id="reward"><summary>打赏</summary><div id="alipay"><span>支付宝 | Alipay</span><br><img src="/img/Alipay.png"></div><div id="wechat"><span>微信 | WeChat</span><br><img src="/img/WeChat.png"></div></details><div id="Valine"></div><script>new Valine({
 el: '#Valine'
 , appId: 'Nq5lj4VJyzKxDJIKCQ8wQAWs-gzGzoHsz'
 , appKey: 'RSAaB7CGtQpU2kjI3iFgD7Rz'
 , placeholder: '此条评论委托企鹅物流发送'
})</script></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a target="_blank" rel="noopener" href="https://github.com/coderhackett"> Dr.hackett</a></h1><section id="total"><a id="total-archives" href="/archives"><span class="total-title">Archives Total:</span><span class="total-number">22</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">11</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">12</span></div></section></div><div id="aside-block"><h1>INDEX</h1><div id="post-index"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E5%85%B7"><span class="toc-number">1.</span> <span class="toc-text">一、准备工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.1.</span> <span class="toc-text">云服务器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%99%BB%E5%BD%95%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B7%A5%E5%85%B7"><span class="toc-number">2.</span> <span class="toc-text">二、登录服务器工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MobaXterm"><span class="toc-number">2.1.</span> <span class="toc-text">MobaXterm</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Centos-Docker%E5%AE%89%E8%A3%85"><span class="toc-number">3.</span> <span class="toc-text">三、Centos Docker安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Docker%E5%AE%9E%E6%88%98%E5%BC%80%E5%A7%8B"><span class="toc-number">4.</span> <span class="toc-text">四、Docker实战开始</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81Docker-Hello-World"><span class="toc-number">4.1.</span> <span class="toc-text">1、Docker Hello World</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E4%BA%A4%E4%BA%92%E5%BC%8F%E5%AE%B9%E5%99%A8"><span class="toc-number">4.2.</span> <span class="toc-text">2、交互式容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8"><span class="toc-number">4.3.</span> <span class="toc-text">3、后台运行容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAweb%E5%BA%94%E7%94%A8"><span class="toc-number">4.4.</span> <span class="toc-text">4、运行一个web应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81Docker%E9%95%9C%E5%83%8F%E4%BD%BF%E7%94%A8"><span class="toc-number">4.5.</span> <span class="toc-text">5、Docker镜像使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81Docker%E5%AE%B9%E5%99%A8%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.6.</span> <span class="toc-text">6、Docker容器连接</span></a></li></ol></li></ol></div></div><footer><nobr><span class="text-title">©</span><span class="text-content">1970 to 2020</span></nobr><wbr><nobr><span class="text-title">ICP</span><span class="text-content">——备案号——</span></nobr><wbr><wbr><nobr>published with&nbsp;<a target="_blank" rel="noopener" href="http://hexo.io">Hexo&nbsp;</a></nobr><wbr><nobr>Theme&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight&nbsp;</a></nobr><wbr><nobr>by&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/arknights.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script></body></html>